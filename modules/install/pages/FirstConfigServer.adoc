[[ariaid-title1]]
== Настройка сервера Docsvision

Пользователь, выполняющий настройку Docsvision, должен являться локальным администратором и быть членом группы безопасности «Docsvision Administrators». Если группа безопасности «Docsvision Administrators» не существует, она будет создана автоматически при первой настройке системы Docsvision.

Если для подключения к СУБД планируется использовать Windows-аутентификацию, у учетной записи, от имени которой запущен мастер настройки Docsvision («Консоль настройки Docsvision»), должны быть следующие права:

* в Microsoft SQL Server: public, dbcreator и sysadmin;
* в PostgreSQL: пользователь «postgres» или эквивалентные права.

Выполните следующие шаги, чтобы подготовить систему Docsvision к работе:

. [.ph .cmd]#Откройте программу «Консоли настройки Docsvision» (ярлык «Docsvision 5 Server Console) и согласитесь с продолжением настройки.#
. [.ph .cmd]#На странице [.ph .uicontrol]*Лицензия* активируйте ключ лицензии Docsvision.#
+
image::img/configMasterLicense.png[[.fig--title-label]##Figure 1. ##Мастер настройки Docsvision]
[loweralpha]
.. [.ph .cmd]#Нажмите [.ph .uicontrol]*Активировать ключ*.#
.. [.ph .cmd]#В открывшемся окне выберите режим [.ph .uicontrol]*Онлайн активация* и нажмите [.ph .uicontrol]*Далее*.#
.. [.ph .cmd]#Укажите серийный номер лицензии и нажмите на [.ph .uicontrol]*Завершить*.#
+
Если постоянное подключение к сети Интернет отсутствует, воспользуйтесь офлайн-активацией. Подробности в документе [.ph]#[.dfn .term]_Модуль «Docsvision 5. Платформа». Руководство администратора_#, пункт «Активация лицензии Docsvision».
. [.ph .cmd]#На странице [.ph .uicontrol]*Требования к системе* ознакомьтесь с результатами проверки требований Docsvision к системе.#
+
image::img/configMasterRequirements.png[[.fig--title-label]##Figure 2. ##Проверка основных требований к системе]
+
* Если не пройдена проверка «Наличие группы или учетной записи IIS "IIS_IUSRS"» или «Наличие модулей NTLM и Basic аутентификации», выполните действия, перечисленные в пункте xref:PrepareServerOS.adoc[Настройка операционной системы].
* Если не пройдена проверка «Принадлежность пользователя <имя пользователя> к группе Docsvision Administrators»:
[loweralpha]
.. Закройте [.dfn .term]_Мастер настройки Docsvision_.
.. Убедитесь, что пользователь, от имени которого выполняется настройка, добавлен в группу безопасности «Docsvision Administrators». Если требуется, добавьте пользователя в группу «Docsvision Administrators» самостоятельно.
.. +++Повторно авторизуйтесь в Windows+++ (выполните Logoff/Logon).
.. Запустите «Консоль настройки Docsvision» и продолжите настройку.
. [.ph .cmd]#На странице [.ph .uicontrol]*Веб-сервер* выберите сайт IIS для публикации сервера Docsvision.#
+
На выбранном сайте будет опубликовано приложение Docsvision. Для приложения будет создан собственный пул: «DefaultAppPool».
. [.ph .cmd]#Создайте базу данных Docsvision.#
[loweralpha]
.. [.ph .cmd]#На странице [.keyword .wintitle]*Базы данных* выберите вариант [.ph .uicontrol]*Создать новую базу данных и подключить ее к серверу* и нажмите [.ph .uicontrol]*Далее*.#
+
image::img/dbListClear.png[[.fig--title-label]##Figure 3. ##Мастер БД Docsvision]
.. [.ph .cmd]#На странице [.ph .uicontrol]*Базы данных. SQL Server* укажите данные для подключения к СУБД.#
+
image::img/connectionToDbCreate.png[[.fig--title-label]##Figure 4. ##Создание БД Docsvision]
+
* Для БД PostgreSQL адрес сервера следует указывать без домена (например, «postgre» вместо «postgre.company.com»), или указывать IP адрес.
* Порт указывается только для PostgreSQL (по умолчанию – 5432).
* Особенности работы через SQL и Windows-аутентификацию рассмотрены в документе [.ph]#[.dfn .term]_Модуль «Docsvision 5. Платформа». Руководство администратора_#, пункт «Особенности использования SQL и Windows-аутентификация».
* Пользователь, от имени которого будет выполняться подключение к СУБД, должен обладать следующими привилегиями:
** в Microsoft SQL Server: public, dbcreator и sysadmin;
** в PostgreSQL: пользователь «postgres» или эквивалентные права.
.. [.ph .cmd]#На странице [.ph .uicontrol]*Базы данных. Создание* укажите имя создаваемой БД.#
+
image::img/infoToDbCreate.png[[.fig--title-label]##Figure 5. ##Создание БД Docsvision]
+
* Не используйте кириллицу, пробелы и спецсимволы в имени БД.
* Для БД Microsoft SQL Server в поле [.ph .uicontrol]*Язык* выберите локаль БД, которая установлена в параметре [.keyword .parmname]_Server Collation_ (способ сортировки данных в таблицах) экземпляра Microsoft SQL Server. Рекомендуемое значение: «Cyrillic_General_CI_AS» (Русский).
* При выборе СУБД Microsoft SQL Server также можно настроить сателлитные БД – отдельные БД для некоторых типов данных. *После создания БД изменять конфигурацию сателлитных БД не рекомендуется – может привести к потере данных*. Для получения информации о сателлитных БД обратитесь к документу [.ph]#[.dfn .term]_Модуль «Docsvision 5. Платформа». Руководство администратора_# пункт «Использование сателлитных баз данных».
.. [.ph .cmd]#На следующих трёх страницах [.ph .uicontrol]*Базы данных. Создание* не изменяйте настройки. Нажмите [.ph .uicontrol]*Далее* для продолжения.#
+
Загрузка данных в БД Docsvision может занять продолжительное время.
. [.ph .cmd]#На странице [.ph .uicontrol]*Настройки Windows-клиента* оставьте настройки по умолчанию.#
+
image::img/clientPerfomance.png[[.fig--title-label]##Figure 6. ##Настройки Windows-клиента]
. [.ph .cmd]#На странице [.ph .uicontrol]*Завершение конфигурации* нажмите [.ph .uicontrol]*Далее*.#
. [.ph .cmd]#На странице [.ph .uicontrol]*Управление Документами и Конструктор согласования* нажмите [.ph .uicontrol]*Далее*. В БД будут загружены данные приложения «Управление документами» и модуля «Конструктор согласований».#
+
Загрузка данных в БД Docsvision может занять продолжительное время.
. [.ph .cmd]#На странице [.ph .uicontrol]*Почтовый клиент* нажмите [.ph .uicontrol]*Далее*. В БД будут загружены данные, необходимые для возможности работы с заданиями с помощью почтового клиента.#
+
Загрузка данных в БД Docsvision может занять продолжительное время.
. [.ph .cmd]#Настройте СУБП (сервис управления бизнес-процессами):#
+
image::img/ConfigMaster_9.png[[.fig--title-label]##Figure 7. ##Загрузка стандартной конфигурации базовых модулей Docsvision]
[loweralpha]
.. [.ph .cmd]#xref:CreateWorkflowAccount.adoc[Создайте учетную запись для СУБП].#
.. [.ph .cmd]#Укажите имя и пароль созданной учетной записи в блоке настроек [.ph .uicontrol]*Настройки сервиса*.#
.. [.ph .cmd]#Нажмите [.ph .uicontrol]*Далее*. Будут загружены настройки модуля «Управление процессами».#
+
Подключение к почтовому серверу может быть настроено позднее. Инструкция по настройке почты приведена в документе [.ph]#[.dfn .term]_Модуль «Docsvision 5. Управление процессами». Руководство администратора_#, пункт «Настройка почты».
. [.ph .cmd]#Нажмите на кнопку [.ph .uicontrol]*Завершить*.#

* *xref:../topics/CreateWorkflowAccount.adoc[Создание учетной записи для СУБП]* +

*Parent topic:* xref:../topics/InstallandConfigServer.adoc[Установка и настройка сервера Docsvision]
